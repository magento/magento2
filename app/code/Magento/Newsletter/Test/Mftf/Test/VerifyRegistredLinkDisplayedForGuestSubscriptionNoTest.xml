<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/testSchema.xsd">
    <test name="VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest">
        <before>
            <!--Log in to Magento as admin.-->
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <!--Allow Guest Subscription NO-->
            <actionGroup ref="AssertAdminNewsletterConfigFieldGuestNotAllowedActionGroup" stepKey="amOnNewsletterConfigField"/>
            <!--Log out from Magento admin.-->
            <actionGroup ref="logout" stepKey="logoutFromAdmin"/>
        </before>

        <amOnPage url="{{StorefrontHomePage.url}}" stepKey="amOnStorefrontPage"/>
        <fillField selector="{{BasicFrontendNewsletterFormSection.newsletterEmail}}" userInput="{{_defaultNewsletter.senderEmail}}" stepKey="fillTemplateEmail" />
        <click selector="{{BasicFrontendNewsletterFormSection.subscribeButton}}" stepKey="subscribe"/>
        <waitForElement selector=".messages" stepKey="waitMessage"/>
    </test>
</tests>
