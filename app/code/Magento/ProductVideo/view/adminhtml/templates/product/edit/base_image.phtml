<?php
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

/** @var \Magento\Framework\View\Helper\SecureHtmlRenderer $secureRenderer */
?>
<div class="row">
    <div class="add-video-button-container">
        <button
            id="add_video_button"
            title="<?= $block->escapeHtmlAttr($addVideoTitle) ?>"
            type="button"
            class="action-secondary"
            data-ui-id="widget-button-1">
            <span><?= $block->escapeHtml(__('Add Video')) ?></span>
        </button>
        <?= /* @noEscape */ $secureRenderer->renderEventListenerAsTag(
            'onclick',
            "jQuery('#new-video').modal('openModal'); jQuery('#new_video_form')[0].reset();",
            'button#add_video_button'
        ) ?>
    </div>
</div>
<div id="<?= $block->escapeHtmlAttr($htmlId) ?>-container"
     class="images"
     data-mage-init='{"baseImage":{}}'
     data-max-file-size="<?= $block->escapeHtmlAttr($fileMaxSize) ?>"
    >
    <div class="image image-placeholder">
        <input type="file" name="image" data-url="<?= $block->escapeUrl($uploadUrl) ?>" multiple="multiple" />
        <img class="spacer" src="<?= $block->escapeUrl($spacerImage) ?>"/>
        <p class="image-placeholder-text"><?= $block->escapeHtml($imagePlaceholderText) ?></p>
    </div>
    <script id="<?= $block->escapeHtmlAttr($htmlId) ?>-template"
            data-template="image"
            type="text/x-magento-template">
        <div class="image">
            <img class="spacer" src="<?= $block->escapeUrl($spacerImage) ?>"/>
            <img
                class="product-image"
                src="<%- data.url %>"
                data-position="<%- data.position %>"
                alt="<%- data.label %>" />
            <div class="actions">
                <button
                    type="button"
                    class="action-delete"
                    data-role="delete-button"
                    title="<?= $block->escapeHtmlAttr($deleteImageText) ?>">
                    <span><?= $block->escapeHtml($deleteImageText) ?></span>
                </button>
                <button
                    type="button"
                    class="action-make-base"
                    data-role="make-base-button"
                    title="<?= $block->escapeHtmlAttr($makeBaseText) ?>">
                    <span><?= $block->escapeHtml($makeBaseText) ?></span>
                </button>
                <div class="draggable-handle"></div>
            </div>
            <div class="image-label"></div>
            <div class="image-fade"><span><?= $block->escapeHtml($hiddenText) ?></span></div>
        </div>
    </script>
</div>
<span class="action-manage-images" data-activate-tab="image-management">
    <span><?= $block->escapeHtml($imageManagementText) ?></span>
</span>
<?php $scriptString = <<<script
    require([
        'jquery'
    ],function($){

        'use strict';

        $('[data-activate-tab=image-management]')
            .on('click.toggleImageManagementTab', function() {
                $('#product_info_tabs_image-management').trigger('click');
            });
    });
script;
?>
<?= /* @noEscape */ $secureRenderer->renderTag('script', [], $scriptString, false) ?>
